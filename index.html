<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://dvyaje.github.io/message/src/styles/style.css">
  <script src="https://kit.fontawesome.com/149fe6044c.js" crossorigin="anonymous"></script>
  <link rel="shortcut icon" type="image/x-icon" href="https://static.vecteezy.com/system/resources/thumbnails/008/480/752/small/red-heart-icon-simple-doodle-illustration-with-red-heart-icon-free-png.png">
  <title>Send Msg!</title>
  
</head>

<body>
  
  <script>
     let msg_box = document.getElementById("msg").value;
let btn = document.getElementById("send");
let x = document.getElementById("alert-notif");
let webhookURL = "https://discord.com/api/webhooks/1038116812992286750/j6q5BUe18IzyumLmG6h0mXgfEGZnFh3sZxwguugjb3c52QoXNBbTJthPASsXvfSyHMl5";
var date = new Date();

function sendMSG() {
  var y = document.forms['msg-form']['msg-input'].value;
  if (y == "") {
    x.style.display = "block";
    return false;
  } else {
    var request = new XMLHttpRequest();
    request.open("POST", webhookURL);
    request.setRequestHeader("Content-type", 'application/json');
    var embededNo = {
      author: {
        name: "ðŸ’Œ New Message Received!"
      },
      title: "Message :",
      description: `>>> "${y}"`,
      footer: {
        text: "yaje's messenger | "+date.toLocaleString()
      },
      color: hexToDecimal("#ff59c7"),
    }
    
    var params = {
      username: "Yaje's Messenger",
      avatar_url: "https://media.discordapp.net/attachments/1009299147335155743/1038137574482513920/d66744a03656033d902168de255660bb.jpg",
      embeds: [ embededNo ]
    }
    
    request.send(JSON.stringify(params));
  }
}

function hexToDecimal(hex) {
  return parseInt(hex.replace("#", ""), 16)
}
  </script>

  <section class="hero is-fullheight">
    <article class="hero-body has-text-centered">
      <div class="container">
        <div class="box">
          <h1 class="title">Send Me Anonymous Message</h1>
          <form name="msg-form" action="redirect.html" onsubmit="return sendMSG()" required>
            <textarea name="msg-input" class="textarea msg-box" id="msg" placeholder="e.g. I like you"></textarea>
            <button class="button send-btn" id="send" type="submit">Send Message</button>
          </form>
          <p class="alert hidden" id="alert-notif">Please enter a message</p>
        </div>
        <h2 class="subtitle">made with <span class="fas fa-heart heart"></span> by yaje!</h2>
      </div>
    </article>
  </section>
  
</body>

</html>
